version = 1


[install]
cocoapods.pkg-path = "cocoapods"
cocoapods.systems = ["x86_64-darwin", "aarch64-darwin"]


[vars]
IOS_SIM_LATEST_DEVICE = "iPhone 17"
IOS_SIM_LATEST_RUNTIME = "26.1"


[hook]
 on-activate = '''
  set -euo pipefail

  project_root="${PROJECT_ROOT:-}"
  if [ -z "$project_root" ] && command -v git >/dev/null 2>&1; then
    project_root="$(git rev-parse --show-toplevel 2>/dev/null || true)"
  fi
  if [ -z "$project_root" ]; then
    project_root="$(cd "$(dirname "${BASH_SOURCE[0]:-$0}")/../.." && pwd)"
  fi
  export PROJECT_ROOT="$project_root"

  if [ -z "${DETOX_IOS_DEVICE:-}" ]; then
    export DETOX_IOS_DEVICE="${IOS_SIM_DEVICE:-${IOS_SIM_LATEST_DEVICE:-iPhone 17}}"
  fi
 '''


[profile]


[services]


[include]
environments = [
    { dir = "../common" },
    { dir = "../nodejs" }
]


[build]


[options]
