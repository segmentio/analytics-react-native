{
  "$schema": "https://raw.githubusercontent.com/jetify-com/devbox/0.14.2/.schema/devbox.schema.json",
  "packages": {
    "cocoapods": {
      "version": "latest",
      "platforms": ["x86_64-darwin", "aarch64-darwin"]
    },
    "yarn-berry": "latest",
    "treefmt": "latest",
    "nixfmt": "latest",
    "shfmt": "latest",
    "jdk17": "latest",
    "gradle": "latest",
    "jq": "latest",
    "netcat": "latest",
    "act": "latest",
    "path:./nix#android-sdk": ""
  },
  "env": {
    "ANDROID_CUSTOM_API": "29",
    "ANDROID_CUSTOM_DEVICE": "pixel_6",
    "IOS_CUSTOM_DEVICE": "iPhone 15"
  },
  "shell": {
    "init_hook": [
      "echo 'Welcome to analytics-react-native devbox!' > /dev/null",
      "INIT_ANDROID=1 INIT_IOS=1 . $DEVBOX_PROJECT_ROOT/scripts/env.sh"
    ],
    "scripts": {
      "clean": [
        "rm -rf $DEVBOX_PROJECT_ROOT/examples/E2E/ios/Podfile.lock",
        "rm -rf $DEVBOX_PROJECT_ROOT/examples/E2E/ios/Pods",
        "cd $DEVBOX_PROJECT_DIR/examples/E2E/android && gradle clean",
        "yarn cache clean",
        "find $DEVBOX_PROJECT_DIR -type d -name node_modules -exec rmdir {} \\;"
      ],
      "build": ["sh $DEVBOX_PROJECT_ROOT/scripts/run.sh build"],
      "format": ["treefmt"],
      "lint": ["treefmt --fail-on-change"],
      "test-android": ["sh $DEVBOX_PROJECT_ROOT/scripts/run.sh android test"],
      "test-ios": ["sh $DEVBOX_PROJECT_ROOT/scripts/run.sh ios test"],
      "setup-android": ["sh $DEVBOX_PROJECT_ROOT/scripts/run.sh android setup"],
      "setup-ios": ["sh $DEVBOX_PROJECT_ROOT/scripts/run.sh ios setup"],
      "start-emulator": ["sh $DEVBOX_PROJECT_ROOT/scripts/run.sh android start"],
      "start-ios": ["sh $DEVBOX_PROJECT_ROOT/scripts/run.sh ios start"],
      "start-android-min": ["TARGET_SDK=min sh $DEVBOX_PROJECT_ROOT/scripts/run.sh android start"],
      "start-android-max": [
        "TARGET_SDK=max sh $DEVBOX_PROJECT_ROOT/scripts/run.sh android start"
      ],
      "start-android": ["sh $DEVBOX_PROJECT_ROOT/scripts/run.sh android start"],
      "update-apps": [
        "yarn install --no-immutable",
        "yarn e2e install --no-immutable",
        "yarn example install --no-immutable"
      ],
      "update-shells": [
        "devbox update",
        "devbox update --config=shells/minimal/devbox.json",
        "devbox update --config=shells/android-min/devbox.json",
        "devbox update --config=shells/android-max/devbox.json",
        "devbox update --config=shells/ios/devbox.json"
      ],
      "reset-android": ["sh $DEVBOX_PROJECT_ROOT/scripts/run.sh android reset"],
      "reset-ios": ["sh $DEVBOX_PROJECT_ROOT/scripts/run.sh ios reset"],
      "stop-android": ["sh $DEVBOX_PROJECT_ROOT/scripts/run.sh android stop"],
      "stop-ios": ["sh $DEVBOX_PROJECT_ROOT/scripts/run.sh ios stop"],
      "stop": ["devbox run stop-android", "devbox run stop-ios"],
      "test": ["devbox run test-android", "devbox run test-ios"]
    }
  }
}
