{
  "$schema": "https://raw.githubusercontent.com/jetify-com/devbox/0.14.2/.schema/devbox.schema.json",
  "packages": {
    "cocoapods": {
      "version": "latest",
      "platforms": ["x86_64-darwin", "aarch64-darwin"]
    },
    "yarn-berry": "latest",
    "treefmt": "latest",
    "nixfmt": "latest",
    "shfmt": "latest",
    "jdk17": "latest",
    "gradle": "latest",
    "jq": "latest",
    "netcat": "latest",
    "path:./nix#android-sdk": "",
    "path:./nix#android-sdk-max": ""
  },
  "shell": {
    "init_hook": [
      "echo 'Welcome to analytics-react-native devbox!' > /dev/null",
      "DEVBOX_INIT_ANDROID=1 DEVBOX_INIT_IOS=1 sh $DEVBOX_PROJECT_ROOT/scripts/devbox/init.sh"
    ],
    "scripts": {
      "clean": [
        "rm -rf $DEVBOX_PROJECT_ROOT/examples/E2E/ios/Podfile.lock",
        "rm -rf $DEVBOX_PROJECT_ROOT/examples/E2E/ios/Pods",
        "cd $DEVBOX_PROJECT_DIR/examples/E2E/android && gradle clean",
        "yarn cache clean",
        "find $DEVBOX_PROJECT_DIR -type d -name node_modules -exec rmdir {} \\;"
      ],
      "build": ["sh $DEVBOX_PROJECT_ROOT/scripts/entry/run.sh build"],
      "format": ["treefmt"],
      "lint": ["treefmt --fail-on-change"],
      "test-android": ["sh $DEVBOX_PROJECT_ROOT/scripts/entry/run.sh android test"],
      "test-ios": ["sh $DEVBOX_PROJECT_ROOT/scripts/entry/run.sh ios test"],
      "act-ci": [
        "sh $DEVBOX_PROJECT_ROOT/scripts/act-ci.sh --platform ubuntu-latest=ghcr.io/catthehacker/ubuntu:act-24.04"
      ],
      "setup-android": ["sh $DEVBOX_PROJECT_ROOT/scripts/entry/run.sh android setup"],
      "setup-ios": ["sh $DEVBOX_PROJECT_ROOT/scripts/entry/run.sh ios setup"],
      "start-emulator": ["sh $DEVBOX_PROJECT_ROOT/scripts/entry/run.sh android start"],
      "start-ios": ["sh $DEVBOX_PROJECT_ROOT/scripts/entry/run.sh ios start"],
      "start-android-minsdk": ["sh $DEVBOX_PROJECT_ROOT/scripts/entry/run.sh android start"],
      "start-android-latest": [
        "AVD_FLAVOR=latest sh $DEVBOX_PROJECT_ROOT/scripts/entry/run.sh android start"
      ],
      "start-android": ["sh $DEVBOX_PROJECT_ROOT/scripts/entry/run.sh android start"],
      "update-apps": [
        "yarn install --no-immutable",
        "yarn e2e install --no-immutable",
        "yarn example install --no-immutable"
      ],
      "update-shells": [
        "devbox update",
        "devbox update --config=shells/minimal/devbox.json",
        "devbox update --config=shells/android-min/devbox.json",
        "devbox update --config=shells/android-max/devbox.json",
        "devbox update --config=shells/ios/devbox.json"
      ],
      "reset-android": ["sh $DEVBOX_PROJECT_ROOT/scripts/entry/run.sh android reset"],
      "reset-ios": ["sh $DEVBOX_PROJECT_ROOT/scripts/entry/run.sh ios reset"],
      "stop-android": ["sh $DEVBOX_PROJECT_ROOT/scripts/entry/run.sh android stop"],
      "stop-ios": ["sh $DEVBOX_PROJECT_ROOT/scripts/entry/run.sh ios stop"],
      "stop": ["devbox run stop-android", "devbox run stop-ios"],
      "test": ["devbox run test-android", "devbox run test-ios"]
    }
  }
}
